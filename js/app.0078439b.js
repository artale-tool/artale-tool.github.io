(function(){"use strict";var t={48:function(t,e,n){var s=n(5130),u=(n(8111),n(1701),n(6768)),l=n(4232);const a={class:"container"},i={class:"main"},r={class:"left-panel"},c={class:"options"},o={class:"option-group"},d={class:"option-group"},p={key:0,class:"duplicates-list"},h={class:"duplicates-title"},f={class:"duplicates-ul"},k=["onClick"],m={key:1,class:"duplicates-list"},v={class:"duplicates-title"},b={class:"duplicates-ul"},w={key:2,class:"participants-list"},L={class:"participants-title"},g={class:"participants-ul"},C={class:"right-panel"},x=["max"],y=["disabled"],_={key:0,class:"winners-list"},E={class:"winners-ul"};function I(t,e,n,I,X,O){return(0,u.uX)(),(0,u.CE)("div",a,[e[12]||(e[12]=(0,u.Lk)("h1",{class:"title"},"留言抽籤工具",-1)),e[13]||(e[13]=(0,u.Lk)("p",{class:"announcement"},[(0,u.eW)(" 🎉 全新 "),(0,u.Lk)("strong",null,"更快速、準確、自動化"),(0,u.eW)(" 的抽籤工具 Chrome 擴充套件上線了！"),(0,u.Lk)("br"),(0,u.eW)(" 👉 "),(0,u.Lk)("a",{href:"https://github.com/artale-tool/discord-lottery-extension",target:"_blank"},"點我前往 GitHub 下載")],-1)),e[14]||(e[14]=(0,u.Lk)("p",{class:"desc"}," 請將 DC 留言複製並貼入以下輸入框。由於 DC 限制一次可複製的留言數量，建議每次複製約 80 則留言。每次複製時，請務必確保與上一次複製的內容之間有換行分隔，以避免資料混淆或遺漏。 ",-1)),(0,u.Lk)("div",i,[(0,u.Lk)("div",r,[(0,u.bo)((0,u.Lk)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>X.rawText=t),rows:"8",placeholder:"請貼上留言"},null,512),[[s.Jo,X.rawText]]),(0,u.Lk)("div",c,[(0,u.Lk)("div",o,[(0,u.Lk)("label",null,[e[6]||(e[6]=(0,u.eW)("推文關鍵字： ")),(0,u.bo)((0,u.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>X.keyword=t)},null,512),[[s.Jo,X.keyword]])])]),(0,u.Lk)("div",d,[(0,u.Lk)("label",null,[e[8]||(e[8]=(0,u.eW)("重複帳號處理： ")),(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>X.duplicateMode=t)},e[7]||(e[7]=[(0,u.Lk)("option",{value:"exclude"},"排除重複帳號",-1),(0,u.Lk)("option",{value:"first"},"僅保留第一筆",-1),(0,u.Lk)("option",{value:"allow"},"允許重複參加",-1)]),512),[[s.u1,X.duplicateMode]])])]),(0,u.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>O.parseText&&O.parseText(...t))},"整理留言")]),O.filteredDuplicates.length?((0,u.uX)(),(0,u.CE)("div",p,[(0,u.Lk)("h2",h,"重複留言帳號（"+(0,l.v_)(O.filteredDuplicates.length)+" 位）",1),e[9]||(e[9]=(0,u.Lk)("p",{class:"note-text"},"※ 部分使用者 ID 可能相同但實際為不同帳號，可能會誤判為重複帳號，請特別留意是否誤排除有效留言。",-1)),(0,u.Lk)("ul",f,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(O.filteredDuplicates,(t,e)=>((0,u.uX)(),(0,u.CE)("li",{key:e,class:"duplicate-item"},[(0,u.Lk)("span",null,(0,l.v_)(t.account)+" - 留言 "+(0,l.v_)(t.count)+" 次（"+(0,l.v_)(t.numbers.map(t=>"推"+t).join(", "))+"） ",1),(0,u.Lk)("button",{onClick:e=>O.includeAccount(t.account),class:"btn-restore"},"還原參加",8,k)]))),128))])])):(0,u.Q3)("",!0),X.duplicateNumbers.length?((0,u.uX)(),(0,u.CE)("div",m,[(0,u.Lk)("h2",v,"推文號碼重複（"+(0,l.v_)(X.duplicateNumbers.length)+" 筆已移除）",1),e[10]||(e[10]=(0,u.Lk)("p",{class:"note-text"},"※ 同一個推號只能保留第一個留言，其餘將自動略過。",-1)),(0,u.Lk)("ul",b,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(X.duplicateNumbers,(t,e)=>((0,u.uX)(),(0,u.CE)("li",{key:e},(0,l.v_)(t.account)+" - 推"+(0,l.v_)(t.number),1))),128))])])):(0,u.Q3)("",!0),X.parsed.length?((0,u.uX)(),(0,u.CE)("div",w,[(0,u.Lk)("h2",L,"參加名單（"+(0,l.v_)(X.parsed.length)+"人）：",1),(0,u.Lk)("ul",g,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(X.parsed,(t,e)=>((0,u.uX)(),(0,u.CE)("li",{key:e},(0,l.v_)(t.account)+" - 推"+(0,l.v_)(t.number),1))),128))])])):(0,u.Q3)("",!0)]),(0,u.Lk)("div",C,[(0,u.Lk)("label",null,[e[11]||(e[11]=(0,u.eW)("抽幾人： ")),(0,u.bo)((0,u.Lk)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>X.drawCount=t),min:"1",max:X.parsed.length||1},null,8,x),[[s.Jo,X.drawCount,void 0,{number:!0}]])]),(0,u.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>O.drawWinners&&O.drawWinners(...t)),disabled:0===X.parsed.length},"抽籤",8,y),X.winners.length?((0,u.uX)(),(0,u.CE)("div",_,[(0,u.Lk)("h2",null,"🎉 中獎名單（"+(0,l.v_)(X.winners.length)+"人）：",1),(0,u.Lk)("ul",E,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(X.winners,(t,e)=>((0,u.uX)(),(0,u.CE)("li",{key:e},(0,l.v_)(t.account)+" - 推"+(0,l.v_)(t.number),1))),128))])])):(0,u.Q3)("",!0)])])])}n(4114),n(2489),n(7588),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var X={data(){return{rawText:"",keyword:"推",duplicateMode:"exclude",parsed:[],drawCount:1,winners:[],duplicates:[],duplicateNumbers:[],entries:[],manualIncluded:[]}},computed:{filteredDuplicates(){return this.duplicates.filter(t=>!this.manualIncluded.includes(t.account))}},methods:{parseText(){const t=this.rawText.split("\n").map(t=>t.trim()),e=[],n=t=>!t||/^\[.*\]$/.test(t)||/^—/.test(t)||/^(昨天|上午|下午|晚上|凌晨).*/.test(t),s=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=s(this.keyword),l=t=>new RegExp(`^${u}\\d+$`).test(t);for(let o=0;o<t.length;o++){const s=t[o],a=s.match(new RegExp(`^${u}(\\d+)$`));if(a){const s=parseInt(a[1]);let u=null;for(let e=o-1;e>=0&&o-e<=5;e--){const s=t[e];if(s&&!n(s)&&!l(s)){u=s.includes("—")?s.split("—")[0].trim():s.trim();break}}u&&e.push({account:u,number:s})}}const a=new Set,i=[],r=[];for(const o of e)a.has(o.number)?r.push(o):(a.add(o.number),i.push(o));this.entries=i,this.duplicateNumbers=r;const c={};this.entries.forEach(t=>{c[t.account]=c[t.account]?[...c[t.account],t.number]:[t.number]}),this.duplicates=Object.entries(c).filter(([,t])=>t.length>1).map(([t,e])=>({account:t,count:e.length,numbers:e})),this.manualIncluded=[],this.updateParsedList(),this.winners=[]},updateParsedList(){const t={};this.entries.forEach(e=>{t[e.account]=t[e.account]?[...t[e.account],e.number]:[e.number]}),"exclude"===this.duplicateMode?this.parsed=this.entries.filter((e,n,s)=>s.findIndex(t=>t.account===e.account)===n&&1===t[e.account].length||this.manualIncluded.includes(e.account)):"first"===this.duplicateMode?this.parsed=this.entries.filter((t,e,n)=>n.findIndex(e=>e.account===t.account)===e||this.manualIncluded.includes(t.account)):this.parsed=this.entries},includeAccount(t){this.manualIncluded.includes(t)||(this.manualIncluded.push(t),this.updateParsedList())},drawWinners(){const t=this.parsed.length;this.drawCount<1&&(this.drawCount=1),this.drawCount>t&&(this.drawCount=t);const e=[...this.parsed].sort(()=>.5-Math.random());this.winners=e.slice(0,this.drawCount)}}},O=n(1241);const T=(0,O.A)(X,[["render",I],["__scopeId","data-v-65aeaeaa"]]);var W=T;(0,s.Ef)(W).mount("#app")}},e={};function n(s){var u=e[s];if(void 0!==u)return u.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,s,u,l){if(!s){var a=1/0;for(o=0;o<t.length;o++){s=t[o][0],u=t[o][1],l=t[o][2];for(var i=!0,r=0;r<s.length;r++)(!1&l||a>=l)&&Object.keys(n.O).every(function(t){return n.O[t](s[r])})?s.splice(r--,1):(i=!1,l<a&&(a=l));if(i){t.splice(o--,1);var c=u();void 0!==c&&(e=c)}}return e}l=l||0;for(var o=t.length;o>0&&t[o-1][2]>l;o--)t[o]=t[o-1];t[o]=[s,u,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var u,l,a=s[0],i=s[1],r=s[2],c=0;if(a.some(function(e){return 0!==t[e]})){for(u in i)n.o(i,u)&&(n.m[u]=i[u]);if(r)var o=r(n)}for(e&&e(s);c<a.length;c++)l=a[c],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(o)},s=self["webpackChunklottery_tool_vue"]=self["webpackChunklottery_tool_vue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],function(){return n(48)});s=n.O(s)})();
//# sourceMappingURL=app.0078439b.js.map