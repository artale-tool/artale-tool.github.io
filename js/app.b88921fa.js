(function(){"use strict";var t={9025:function(t,e,n){var r=n(5130),l=(n(8111),n(1701),n(6768)),o=n(4232);const i={class:"container"},u={class:"main"},s={class:"left-panel"},a={class:"options"},c={key:0,class:"duplicates-list"},d={class:"font-semibold mb-2 text-red-600"},p={class:"list-disc pl-5 text-sm text-gray-700"},f={key:1,class:"participants-list"},h={class:"font-semibold mb-2"},v={class:"list-disc pl-5"},k={class:"right-panel"},b=["max"],w=["disabled"],m={key:0,class:"winners-list"};function L(t,e,n,L,g,x){return(0,l.uX)(),(0,l.CE)("div",i,[e[10]||(e[10]=(0,l.Lk)("h1",{class:"title"},"留言抽籤工具",-1)),e[11]||(e[11]=(0,l.Lk)("p",{class:"desc"}," 將DC留言複製到以下框，並注意換行。DC有限制一次可以複製的量，請留意是否有完整複製。 ",-1)),(0,l.Lk)("div",u,[(0,l.Lk)("div",s,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.rawText=t),rows:"8",placeholder:"請貼上留言"},null,512),[[r.Jo,g.rawText]]),(0,l.Lk)("div",a,[(0,l.Lk)("div",null,[(0,l.Lk)("label",null,[e[6]||(e[6]=(0,l.eW)("推文關鍵字： ")),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.keyword=t)},null,512),[[r.Jo,g.keyword]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("label",null,[e[8]||(e[8]=(0,l.eW)("重複帳號處理： ")),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>g.duplicateMode=t)},e[7]||(e[7]=[(0,l.Lk)("option",{value:"exclude"},"排除重複帳號",-1),(0,l.Lk)("option",{value:"first"},"僅保留第一筆",-1),(0,l.Lk)("option",{value:"allow"},"允許重複參加",-1)]),512),[[r.u1,g.duplicateMode]])])]),(0,l.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>x.parseText&&x.parseText(...t))},"整理留言")]),g.duplicates.length?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("h2",d," 重複留言帳號（"+(0,o.v_)(g.duplicates.length)+" 位） ",1),(0,l.Lk)("ul",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.duplicates,(t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(t.account)+" - 留言 "+(0,o.v_)(t.count)+" 次（ "+(0,o.v_)(t.numbers.map(t=>"推"+t).join(", "))+" ） ",1))),128))])])):(0,l.Q3)("",!0),g.parsed.length?((0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("h2",h,"參加名單（"+(0,o.v_)(g.parsed.length)+"人）：",1),(0,l.Lk)("ul",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.parsed,(t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(t.account)+" - 推"+(0,o.v_)(t.number),1))),128))])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",k,[(0,l.Lk)("label",null,[e[9]||(e[9]=(0,l.eW)("抽幾人： ")),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>g.drawCount=t),min:"1",max:g.parsed.length||1},null,8,b),[[r.Jo,g.drawCount,void 0,{number:!0}]])]),(0,l.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>x.drawWinners&&x.drawWinners(...t)),disabled:0===g.parsed.length}," 抽籤 ",8,w),g.winners.length?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("h2",null,"🎉 中獎名單（"+(0,o.v_)(g.winners.length)+"人）：",1),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.winners,(t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(t.account)+" - 推"+(0,o.v_)(t.number),1))),128))])])):(0,l.Q3)("",!0)])])])}n(4114),n(2489);var g={data(){return{rawText:"",keyword:"推",duplicateMode:"exclude",parsed:[],drawCount:1,winners:[],duplicates:[]}},methods:{parseText(){const t=this.rawText.split("\n").map(t=>t.trim()),e=[],n=t=>!t||(!!/^\[.*\]$/.test(t)||(!!/^—/.test(t)||!!/^(昨天|上午|下午|晚上|凌晨).*/.test(t))),r=t=>new RegExp(`^${this.keyword}[+]?\\d+$`).test(t);for(let o=0;o<t.length;o++){const l=t[o],i=l.match(new RegExp(`^${this.keyword}[+]?(\\d+)$`));if(i){const l=parseInt(i[1]);let u=null;for(let e=o-1;e>=0&&o-e<=5;e--){const l=t[e];if(l&&(!r(l)&&!n(l))){u=l.includes("—")?l.split("—")[0].trim():l.trim();break}}u&&e.push({account:u,number:l})}}const l={};e.forEach(t=>{l[t.account]=l[t.account]?[...l[t.account],t.number]:[t.number]}),this.duplicates=Object.entries(l).filter(([,t])=>t.length>1).map(([t,e])=>({account:t,count:e.length,numbers:e})),"exclude"===this.duplicateMode?this.parsed=e.filter((t,e,n)=>n.findIndex(e=>e.account===t.account)===e&&1===l[t.account].length):"first"===this.duplicateMode?this.parsed=e.filter((t,e,n)=>n.findIndex(e=>e.account===t.account)===e):(this.duplicateMode,this.parsed=e),this.winners=[]},drawWinners(){const t=this.parsed.length;this.drawCount<1&&(this.drawCount=1),this.drawCount>t&&(this.drawCount=t);const e=[...this.parsed].sort(()=>.5-Math.random());this.winners=e.slice(0,this.drawCount)}}},x=n(1241);const C=(0,x.A)(g,[["render",L]]);var y=C;(0,r.Ef)(y).mount("#app")}},e={};function n(r){var l=e[r];if(void 0!==l)return l.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,l,o){if(!r){var i=1/0;for(c=0;c<t.length;c++){r=t[c][0],l=t[c][1],o=t[c][2];for(var u=!0,s=0;s<r.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every(function(t){return n.O[t](r[s])})?r.splice(s--,1):(u=!1,o<i&&(i=o));if(u){t.splice(c--,1);var a=l();void 0!==a&&(e=a)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,l,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var l,o,i=r[0],u=r[1],s=r[2],a=0;if(i.some(function(e){return 0!==t[e]})){for(l in u)n.o(u,l)&&(n.m[l]=u[l]);if(s)var c=s(n)}for(e&&e(r);a<i.length;a++)o=i[a],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},r=self["webpackChunklottery_tool_vue"]=self["webpackChunklottery_tool_vue"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],function(){return n(9025)});r=n.O(r)})();
//# sourceMappingURL=app.b88921fa.js.map